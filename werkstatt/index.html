<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FSA Werkstatt-Zentrale v1.4</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#0b1220;color:#e5e7eb}
.container{max-width:960px;margin:40px auto;padding:20px;background:#111827;border-radius:16px;box-shadow:0 0 30px rgba(0,0,0,.3)}
h1{margin-top:0;color:#38bdf8;text-align:center}
table{width:100%;border-collapse:collapse;margin-top:12px}
th,td{text-align:left;padding:10px}
th{background:#1e293b;color:#f1f5f9}
td{border-bottom:1px solid #1f2937}
.status{color:#22c55e}
button{background:#2563eb;border:none;color:#fff;padding:10px 16px;border-radius:8px;cursor:pointer;margin-top:10px}
button:hover{background:#1d4ed8}
.log{background:#0f172a;border-radius:8px;padding:12px;margin-top:16px;font-size:.9rem;white-space:pre-line}
.copy{float:right;font-size:.85rem;cursor:pointer;color:#38bdf8}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.65);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:999}
.modal-content{background:#111827;padding:24px;border-radius:12px;width:90%;max-width:700px;box-shadow:0 0 25px rgba(0,0,0,.4)}
.modal-content h2{color:#38bdf8;margin-top:0}
.modal-content p{line-height:1.6}
pre{background:#0f172a;padding:10px;border-radius:8px;overflow-x:auto}
.copy-all{display:block;margin-top:12px;background:#38bdf8;color:#000;font-weight:600}
footer{text-align:center;margin-top:30px;font-size:.85rem;color:#64748b}
</style>
</head>
<body>
<div class="container">
  <h1>🛠 FSA Werkstatt-Zentrale v1.4</h1>
  <p style="text-align:center">Autonome Freigabe- und Diagnoseeinheit – Build v2.7.5 + Commit-Regelhilfe aktiv</p>

  <table>
    <tr><th>Modul</th><th>Status</th><th>Aktion</th></tr>
    <tr><td>📮 Poststelle</td><td class="status">aktiv</td><td><a href="../poststelle/">Öffnen</a></td></tr>
    <tr><td>🧠 Patch-Manager</td><td class="status">aktiv</td><td><a href="../tools/patch-manager.html">Code</a></td></tr>
    <tr><td>🧩 LP-Generator</td><td class="status">aktiv</td><td><a href="../lp-template.html">Template</a></td></tr>
    <tr><td>💾 Backup-Archiv</td><td class="status">aktiv</td><td><a href="../BACKUP_INFO.txt">Info</a></td></tr>
  </table>

  <h3 style="margin-top:24px">📦 Eingehende Patches</h3>
  <ul>
    <li>📧 E-Mail-Feld inkl. Vor/Nachnamen (LP-Template)</li>
    <li>🎬 Menüleiste ohne „Kino“-Modul</li>
  </ul>

  <button id="sync">🔄 System synchronisieren</button>
  <div class="log" id="log">Log geöffnet …</div>

  <h3>🩺 Diagnose-Log-Reader</h3>
  <p>Quelle: <code>/docs/diagnose_log/FSA_DIAGNOSE_LOG.txt</code></p>
  <div class="log" id="diaglog">Log wird initialisiert …</div>

  <button id="showRules">📘 Commit-Regeln anzeigen</button>
</div>

<!-- 📘 Commit-Regeln-Popup -->
<div class="modal" id="rulesModal">
  <div class="modal-content">
    <h2>📘 Commit-Regeln – FSA-Standard v1.0</h2>

    <p><b>0. Vollständiger Code</b> <span class="copy" onclick="copyText('codeBlock')">📋 Kopieren</span></p>
    <pre id="codeBlock">Immer den kompletten Codeblock einfügen – keine Teilstücke.</pre>

    <p><b>1. GitHub-Pfad</b> <span class="copy" onclick="copyText('pfadBlock')">📋 Kopieren</span></p>
    <pre id="pfadBlock">/Lp-Generator/werkstatt/index.html</pre>

    <p><b>2. Commit-Message</b> <span class="copy" onclick="copyText('msgBlock')">📋 Kopieren</span></p>
    <pre id="msgBlock">Update Werkstatt-Zentrale auf v1.4 – Commit-Regelhilfe integriert + Log-Fallback</pre>

    <p><b>3. Extended Description</b> <span class="copy" onclick="copyText('descBlock')">📋 Kopieren</span></p>
    <pre id="descBlock">Integration der Commit-Regelhilfe (0–5-Liste mit Kopierfeldern), Log-Fallback bei nicht erreichbarem Diagnosefile und stabilisiertes Auto-Refresh.</pre>

    <p><b>4. Test-Link</b> <span class="copy" onclick="copyText('linkBlock')">📋 Kopieren</span></p>
    <pre id="linkBlock">https://adler-fsa.github.io/Lp-Generator/werkstatt/</pre>

    <p><b>5. Schritt-für-Schritt Anleitung</b> <span class="copy" onclick="copyText('stepsBlock')">📋 Kopieren</span></p>
    <pre id="stepsBlock">1️⃣ Datei öffnen → /Lp-Generator/werkstatt/index.html
2️⃣ Alten Inhalt löschen  
3️⃣ Code aus Block 0 einfügen  
4️⃣ Commit-Message & Description eintragen  
5️⃣ „Commit changes“ klicken  
6️⃣ Nach 60 Sekunden testen unter dem oben genannten Link.</pre>

    <button class="copy-all" onclick="copyAll()">📋 Alles kopieren</button>
    <button onclick="closeModal()" style="margin-top:8px">Schließen</button>
  </div>
</div>

<script>
const log=document.getElementById("log");
document.getElementById("sync").onclick=()=>{log.textContent+="\n🔧 Werkstatt synchronisiert … Poststelle und LP-Generator verbunden …";setTimeout(()=>log.textContent+="\n✅ System vollständig synchronisiert (v1.4)",1500);};

// Modal-Steuerung
const modal=document.getElementById("rulesModal");
document.getElementById("showRules").onclick=()=>modal.style.display="flex";
function closeModal(){modal.style.display="none";}

// Kopier-Funktionen
function copyText(id){navigator.clipboard.writeText(document.getElementById(id).innerText);}
function copyAll(){
 let text="";
['codeBlock','pfadBlock','msgBlock','descBlock','linkBlock','stepsBlock']
.forEach(id=>text+=document.getElementById(id).innerText+"\n\n");
navigator.clipboard.writeText(text);
alert("✅ Alle Commit-Infos kopiert!");
}
</script>

<footer>© 2025 Finanzielle Souveränitäts Akademie | Werkstatt-Zentrale v1.4 – Commit-Regelhilfe aktiv</footer>
</body>
</html>
