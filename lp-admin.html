<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>⚙️ LP Admin Core v1.3.0</title>
<style>
  body { font-family:Arial,sans-serif; max-width:900px; margin:40px auto; background:#f8f9fa; color:#222; }
  h1 { text-align:center; }
  table { width:100%; border-collapse:collapse; margin-top:20px; }
  th,td { border:1px solid #ccc; padding:8px; text-align:left; }
  th { background:#eee; }
  .approved { color:green; font-weight:bold; }
  .pending { color:orange; font-weight:bold; }
  button { padding:6px 12px; margin:2px; }
</style>
</head>
<body>
<h1>⚙️ LP Admin – Qualitätsprüfung v1.3.0</h1>
<p>Simulierte Verwaltung von Partner-E-Mails. (In Realität Commit auf GitHub API)</p>

<h2>Bestehende Partner</h2>
<table id="emailTable">
  <thead>
    <tr><th>ID</th><th>E-Mail</th><th>Status</th><th>Aktionen</th></tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Neue E-Mail hinzufügen</h2>
<form id="addForm">
  <label>ID: <input type="text" id="newId" required></label>
  <label>E-Mail: <input type="email" id="newEmail" required></label>
  <button type="submit">Hinzufügen</button>
</form>

<script>
async function loadEmails(){
  try {
    const res = await fetch('emails.json');
    const data = await res.json();
    renderTable(data.emails);
  } catch(e){
    console.error('Fehler beim Laden der emails.json');
  }
}

function renderTable(emails){
  const tbody=document.querySelector('#emailTable tbody');
  tbody.innerHTML="";
  emails.forEach((e,i)=>{
    const row=document.createElement('tr');
    row.innerHTML=`<td>${e.id}</td><td>${e.email}</td>
                   <td class="${e.approved?'approved':'pending'}">${e.approved?'✅ freigegeben':'⏳ ausstehend'}</td>
                   <td>
                     <button onclick="toggleStatus(${i})">Status wechseln</button>
                   </td>`;
    tbody.appendChild(row);
  });
}

function toggleStatus(index){
  alert('Status wird gewechselt (Demo) – in Realität: Update von emails.json per Commit.');
}

document.getElementById('addForm').addEventListener('submit',e=>{
  e.preventDefault();
  const id=document.getElementById('newId').value;
  const mail=document.getElementById('newEmail').value;
  alert('Neue E-Mail hinzugefügt (Demo): '+id+' -> '+mail);
});

loadEmails();
</script>
</body>
</html>