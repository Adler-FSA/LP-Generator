<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>📬 FSA Poststelle v2.8.4 – Consolidated Release</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,sans-serif;background:#0b1220;color:#e2e8f0;margin:0;padding:40px;text-align:center}
  h1{font-size:1.8rem;color:#38bdf8;margin-bottom:10px}
  p{color:#94a3b8;margin-bottom:30px}
  input{padding:10px 12px;border-radius:6px;border:1px solid #1e293b;background:#111827;color:#fff;width:240px}
  button{background:#2563eb;color:#fff;border:none;padding:10px 18px;border-radius:6px;font-weight:600;cursor:pointer;margin-left:8px}
  button:hover{background:#1e40af}
  table{width:100%;max-width:940px;margin:30px auto;border-collapse:collapse;text-align:left}
  th,td{padding:10px;border-bottom:1px solid #1e293b}
  th{background:#1e293b}
  tr:hover{background:#1e293b66}
  .ok{color:#10b981;font-weight:600}
  .warn{color:#f59e0b;font-weight:600}
  .err{color:#ef4444;font-weight:600}
  footer{margin-top:30px;font-size:.8rem;color:#64748b}
  .small{font-size:.85rem;color:#a1a1aa}
</style>
</head>
<body>
<h1>📬 FSA Poststelle v2.8.4</h1>
<p>Globale Update- & Distributionszentrale · Build Consolidated · Autonomes System</p>

<!-- TOKEN -->
<div id="tokenArea">
  <input type="password" id="tokenInput" placeholder="Token eingeben...">
  <button onclick="startSystem()">🔑 Aktivieren</button>
</div>

<!-- STATUS -->
<table id="systemTable" style="display:none;">
  <tr><th>Modul</th><th>Status</th><th>Letztes Update</th><th>Aktion</th></tr>
  <tr data-url="https://adler-fsa.github.io/Lp-Generator/werkstatt/">
    <td>🧰 Werkstatt</td><td class="status">⏳</td><td class="time">–</td>
    <td><a href="#" target="_blank" class="btn">Öffnen</a></td>
  </tr>
  <tr data-url="https://adler-fsa.github.io/Lp-Generator/tools/">
    <td>⚙️ Tools</td><td class="status">⏳</td><td class="time">–</td>
    <td><a href="#" target="_blank" class="btn">Öffnen</a></td>
  </tr>
  <tr data-url="https://adler-fsa.github.io/Lp-Generator/lp-template.html">
    <td>🪶 LP-Template</td><td class="status">⏳</td><td class="time">–</td>
    <td><a href="#" target="_blank" class="btn">Öffnen</a></td>
  </tr>
  <tr data-url="https://adler-fsa.github.io/Lp-Generator/FSA-whitelabel.html">
    <td>🌍 WhiteLabel System</td><td class="status">⏳</td><td class="time">–</td>
    <td><a href="#" target="_blank" class="btn">Öffnen</a></td>
  </tr>
  <tr data-url="https://adler-fsa.github.io/Lp-Generator/manifest.txt">
    <td>📜 Manifest & Vision</td><td class="status">⏳</td><td class="time">–</td>
    <td><a href="#" target="_blank" class="btn">Öffnen</a></td>
  </tr>
</table>

<footer>
  FSA Poststelle v2.8.4 · Consolidated Build · © Akademie der finanziellen Souveränität<br>
  <span class="small">Autonomes Update-System – Web 4.0 Proof of Vision</span><br>
  <button id="infoBtn" style="margin-top:8px;padding:6px 12px;border:none;border-radius:6px;background:#334155;color:#e2e8f0;cursor:pointer;">ℹ️ Info</button>
</footer>

<!-- INFO-PANEL -->
<div id="infoPanel" style="display:none;max-width:860px;margin:30px auto;padding:18px;background:#1e293b;color:#f1f5f9;border-radius:8px;text-align:left;font-size:.95rem;line-height:1.6;">
  <h3 style="margin-top:0;color:#38bdf8;">Wie die Poststelle funktioniert</h3>
  <p>Die Poststelle ist das Herz des FSA-Systems. Sie liefert Updates an alle Module – Werkstatt, Tools, Manifest und Templates – und hält sie synchron.</p>
  <p>Sie kann jedoch <i>nicht sich selbst aktualisieren</i>, während sie läuft. Das liegt daran, dass GitHub Pages statische Dateien ausliefert und keine Seite ihre eigene Datei überschreiben darf. Darum wird die Poststelle von dir manuell ausgetauscht – danach aktualisiert sie alle anderen Dateien selbständig.</p>
  <p>Man kann es sich so vorstellen: Die Poststelle ist ein Postbote – er kann alle Pakete ausliefern, aber nicht seine eigene Uniform nähen, während er sie trägt. Wenn du ihm eine neue Uniform gibst (also die Datei tauschst), macht er danach wieder seinen Job – schneller und sicherer als zuvor.</p>
  <p><b>Aufbau:</b><br>
      📬 Poststelle → liefert Aufträge an die Werkstatt und Tools<br>
      🧰 Werkstatt → führt Patches aus, schreibt HTML und JS<br>
      ⚙️ Tools → stellen Unterfunktionen für Generator und Module bereit<br>
      🌍 GitHub Pages → veröffentlicht die fertigen Dateien weltweit</p>
</div>

<script>
let globalToken="";
async function startSystem(){
  const t=document.getElementById("tokenInput").value.trim();
  if(!t){alert("Bitte gültigen Token eingeben.");return;}
  globalToken=t;
  document.getElementById("tokenArea").style.display="none";
  document.getElementById("systemTable").style.display="table";
  refreshAll();
  setInterval(refreshAll,90000);
}
async function refreshAll(){
  document.querySelectorAll("#systemTable tr[data-url]").forEach(r=>checkStatus(r));
}
async function checkStatus(r){
  const u=r.dataset.url;
  const s=r.querySelector(".status");
  const time=r.querySelector(".time");
  const link=r.querySelector(".btn");
  try{
    const res=await fetch(u+"?nocache="+Date.now(),{method:"HEAD"});
    if(res.ok || res.type==="opaque"){s.textContent="🟢 aktiv";s.className="status ok";}
    else{s.textContent="🟡 geprüft";s.className="status warn";}
    link.href=u;time.textContent=new Date().toLocaleString("de-DE");
  }catch(e){
    s.textContent="🔴 offline";s.className="status err";
  }
}
document.getElementById("infoBtn").onclick=()=>{
  const p=document.getElementById("infoPanel");
  p.style.display=(p.style.display==="none")?"block":"none";
};
</script>
</body>
</html>
